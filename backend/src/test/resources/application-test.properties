spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.hibernate.ddl-auto=create-drop
spring.flyway.enabled=false
spring.liquibase.enabled=false

# H2 (compléments utiles)
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=never

# Couper ce qui casse en test
spring.flyway.enabled=false
spring.liquibase.enabled=false
spring.task.scheduling.enabled=false

# Exclure la sécu/OAuth2 en test (évite 401/beans manquants)
spring.autoconfigure.exclude=\
org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,\
org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration,\
org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration

# Secrets/vars factices utilisés par tes @Value(...)
jwt.secret=Ndj37hFdhs82JslaaLAJdksnD38HsksOQwpeLAJSi28shSuw82DkqhsDksjqhs82
spring.mail.host=localhost
spring.mail.port=2525
spring.security.oauth2.client.registration.google.client-id=dummy
spring.security.oauth2.client.registration.google.client-secret=dummy
stripe.secret-key=dummy
